<!DOCTYPE html>
<html>
<head>
    <title>Privy postMessage Test</title>
</head>
<body>
    <h1>Privy postMessage Capture</h1>
    
    <!-- Iframe embedding Privy -->
    <iframe id="privyFrame" src="https://dashboard.privy.io/account-overview" width="800" height="600"></iframe>
    
    <h2>Captured Messages:</h2>
    <div id="messages"></div>

    <script>
        // Listen for all postMessage events
        window.addEventListener('message', function(event) {
            console.log('Message received:', event);
            
            // Log all details
            const messageDiv = document.createElement('div');
            messageDiv.style.border = '1px solid #ccc';
            messageDiv.style.padding = '10px';
            messageDiv.style.margin = '10px 0';
            messageDiv.innerHTML = `
                <strong>Origin:</strong> ${event.origin}<br>
                <strong>Data:</strong> <pre>${JSON.stringify(event.data, null, 2)}</pre>
                <strong>Source:</strong> ${event.source === document.getElementById('privyFrame').contentWindow ? 'iframe' : 'unknown'}
            `;
            
            document.getElementById('messages').appendChild(messageDiv);
        }, false);
    </script>
</body>
</html>
