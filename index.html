<!DOCTYPE html>
<html>
<head>
    <title>Iframe Data Exfiltration</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            color: #4fc3f7;
        }
        
        .layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .panel {
            background: #252526;
            border: 1px solid #3e3e42;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .panel-header {
            background: #2d2d30;
            padding: 15px;
            font-weight: bold;
            color: #dcdcaa;
            border-bottom: 1px solid #3e3e42;
        }
        
        .panel-content {
            padding: 20px;
        }
        
        .iframe-container {
            background: white;
            height: 400px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .controls {
            background: #252526;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #3e3e42;
            margin-bottom: 20px;
        }
        
        input {
            width: 400px;
            padding: 10px;
            background: #3c3c3c;
            border: 1px solid #3e3e42;
            color: #d4d4d4;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        
        button {
            padding: 10px 20px;
            background: #0e639c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            font-family: 'Courier New', monospace;
        }
        
        button:hover {
            background: #1177bb;
        }
        
        .data-display {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #3e3e42;
            max-height: 350px;
            overflow-y: auto;
            font-size: 11px;
            white-space: pre-wrap;
            word-break: break-all;
        }
        
        .data-display::-webkit-scrollbar {
            width: 10px;
        }
        
        .data-display::-webkit-scrollbar-track {
            background: #1e1e1e;
        }
        
        .data-display::-webkit-scrollbar-thumb {
            background: #424242;
            border-radius: 5px;
        }
        
        .warning {
            background: #3e2a00;
            border: 1px solid #ffa500;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            color: #ffa500;
            font-size: 13px;
        }
        
        .info {
            background: #1e3a5f;
            border: 1px solid #4fc3f7;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            color: #4fc3f7;
            font-size: 13px;
        }
        
        .success {
            color: #6a9955;
            font-weight: bold;
        }
        
        .error {
            color: #f48771;
            font-weight: bold;
        }

        code {
            background: #2d2d30;
            padding: 2px 6px;
            border-radius: 3px;
            color: #ce9178;
        }

        .method-section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #3e3e42;
        }

        .method-section:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <h1>üîì Iframe Data Exfiltration Tool</h1>

    <div class="warning">
        <strong>‚ö†Ô∏è Cross-Origin Security:</strong><br>
        Browsers prevent accessing iframe content from different origins (Same-Origin Policy).<br>
        You <strong>cannot</strong> directly access <code>iframe.contentWindow.playerConfig</code> if the iframe is from a different domain.
    </div>

    <div class="info">
        <strong>üí° Working Methods:</strong><br>
        1. <strong>Inject Script</strong> - If you control the iframe source, inject a script to postMessage data<br>
        2. <strong>Browser Extension</strong> - Extensions can access cross-origin iframe content<br>
        3. <strong>DevTools Console</strong> - Manually run code in the iframe's console<br>
        4. <strong>Proxy/MITM</strong> - Intercept and modify the iframe response to inject exfiltration code
    </div>

    <div class="controls">
        <input type="text" id="videoUrl" placeholder="Enter Vimeo URL" value="https://player.vimeo.com/video/935884964?background=1">
        <button onclick="loadIframe()">Load Iframe</button>
        <button onclick="tryExfiltrate()">Try Extract (Will Fail)</button>
        <button onclick="showInstructions()">Show Manual Method</button>
    </div>

    <div class="layout">
        <div class="panel">
            <div class="panel-header">üì∫ VIMEO IFRAME</div>
            <div class="panel-content">
                <div class="iframe-container">
                    <iframe id="targetIframe"></iframe>
                </div>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-header">üìä EXFILTRATED DATA</div>
            <div class="panel-content">
                <div class="data-display" id="dataDisplay">
                    Load an iframe and try to extract data...
                </div>
            </div>
        </div>
    </div>

    <div class="controls" style="margin-top: 20px;">
        <div class="method-section">
            <h3 style="color: #dcdcaa; margin-bottom: 10px;">Method 1: Manual Console Injection</h3>
            <p style="color: #9cdcfe; margin-bottom: 10px;">
                This is the ONLY method that works without a browser extension:
            </p>
            <ol style="color: #9cdcfe; margin-left: 20px; line-height: 1.8;">
                <li>Load the Vimeo iframe above</li>
                <li>Open DevTools (F12)</li>
                <li>In the console dropdown, select the <strong>iframe context</strong> (it will show the player.vimeo.com origin)</li>
                <li>Paste this code in the console:</li>
            </ol>
            <pre style="background: #1e1e1e; padding: 10px; border-radius: 4px; overflow-x: auto; margin: 10px 0;"><code>// Extract playerConfig
if (window.playerConfig) {
    console.log('Player Config Found!');
    console.log(JSON.stringify(window.playerConfig, null, 2));
    
    // Copy to clipboard
    navigator.clipboard.writeText(JSON.stringify(window.playerConfig, null, 2));
    console.log('‚úì Copied to clipboard!');
} else {
    console.log('playerConfig not found');
}</code></pre>
            <p style="color: #6a9955;">‚úì This will copy the entire playerConfig to your clipboard!</p>
        </div>

        <div class="method-section">
            <h3 style="color: #dcdcaa; margin-bottom: 10px;">Method 2: Browser Extension Content Script</h3>
            <p style="color: #9cdcfe; margin-bottom: 10px;">
                Create a Chrome extension with a content script that runs on player.vimeo.com:
            </p>
            <pre style="background: #1e1e1e; padding: 10px; border-radius: 4px; overflow-x: auto; margin: 10px 0;"><code>// manifest.json
{
  "manifest_version": 3,
  "name": "Vimeo Config Extractor",
  "content_scripts": [{
    "matches": ["*://player.vimeo.com/*"],
    "js": ["content.js"],
    "run_at": "document_end"
  }]
}

// content.js
if (window.playerConfig) {
  // Send to background or parent page
  window.parent.postMessage({
    type: 'vimeo_config',
    data: window.playerConfig
  }, '*');
}</code></pre>
        </div>

        <div class="method-section">
            <h3 style="color: #dcdcaa; margin-bottom: 10px;">Method 3: Bookmarklet (Works in iframe context)</h3>
            <p style="color: #9cdcfe; margin-bottom: 10px;">
                Create a bookmark with this code and click it while the iframe is focused:
            </p>
            <pre style="background: #1e1e1e; padding: 10px; border-radius: 4px; overflow-x: auto; margin: 10px 0;"><code>javascript:(function(){if(window.playerConfig){alert('Config found! Check console.');console.log(JSON.stringify(window.playerConfig,null,2));navigator.clipboard.writeText(JSON.stringify(window.playerConfig,null,2)).then(()=>alert('Copied to clipboard!'));}else{alert('No playerConfig found');}})();</code></pre>
            <p style="color: #6a9955;">‚úì Save this as a bookmark and click it when viewing the Vimeo iframe!</p>
        </div>
    </div>

    <script>
        function loadIframe() {
            const url = document.getElementById('videoUrl').value;
            const iframe = document.getElementById('targetIframe');
            const display = document.getElementById('dataDisplay');
            
            iframe.src = url;
            display.textContent = 'Iframe loaded. Waiting for postMessage (if available)...';
        }

        function tryExfiltrate() {
            const iframe = document.getElementById('targetIframe');
            const display = document.getElementById('dataDisplay');
            
            try {
                // This WILL FAIL due to same-origin policy
                const iframeWindow = iframe.contentWindow;
                const iframeDoc = iframe.contentDocument || iframeWindow.document;
                
                // Try to access playerConfig
                const config = iframeWindow.playerConfig;
                
                if (config) {
                    display.innerHTML = `<span class="success">‚úì Success!</span>\n\n` +
                        JSON.stringify(config, null, 2);
                } else {
                    display.innerHTML = `<span class="error">‚úó playerConfig not found</span>`;
                }
            } catch (error) {
                display.innerHTML = `<span class="error">‚úó Cross-Origin Error (Expected)</span>\n\n` +
                    `Error: ${error.message}\n\n` +
                    `This is because the iframe is from a different origin (player.vimeo.com).\n` +
                    `The browser blocks access to cross-origin iframe content.\n\n` +
                    `<strong>Use one of the manual methods shown below instead!</strong>`;
            }
        }

        function showInstructions() {
            const display = document.getElementById('dataDisplay');
            display.innerHTML = `<span class="success">üìã Step-by-Step Instructions:</span>\n\n` +
                `1. Load the Vimeo iframe using the button above\n` +
                `2. Open browser DevTools (F12)\n` +
                `3. Go to the Console tab\n` +
                `4. In the context dropdown (top-left of console), select the iframe:\n` +
                `   Look for "player.vimeo.com"\n` +
                `5. Paste this code and press Enter:\n\n` +
                `   if (window.playerConfig) {\n` +
                `     console.log(JSON.stringify(window.playerConfig, null, 2));\n` +
                `     navigator.clipboard.writeText(JSON.stringify(window.playerConfig, null, 2));\n` +
                `     console.log('‚úì Copied to clipboard!');\n` +
                `   }\n\n` +
                `6. The playerConfig will be copied to your clipboard!\n` +
                `7. Paste it anywhere to save it\n\n` +
                `This works because you're running the code INSIDE the iframe's context.`;
        }

        // Listen for postMessage from iframe (if someone injects code there)
        window.addEventListener('message', (event) => {
            const display = document.getElementById('dataDisplay');
            
            // Check if it's from Vimeo
            if (event.origin === 'https://player.vimeo.com') {
                console.log('Received message from Vimeo iframe:', event.data);
                
                if (event.data.type === 'vimeo_config') {
                    display.innerHTML = `<span class="success">‚úì Received data from iframe!</span>\n\n` +
                        JSON.stringify(event.data.data, null, 2);
                } else {
                    display.innerHTML = `<span class="success">‚úì Received message from iframe:</span>\n\n` +
                        JSON.stringify(event.data, null, 2);
                }
            }
        });

        // Auto-load on page load
        window.addEventListener('load', () => {
            loadIframe();
        });
    </script>
</body>
</html>
